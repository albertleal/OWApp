<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<title>test animations</title>
	<link href="../themes/default/css/default.css" rel="stylesheet">
	<link href="../themes/default/css/animations.css" rel="stylesheet"></head>
<body class="">
	<div id="container">
		<div id="leftLayer" class="canvas off-canvas-left">
			<div class="canvas-content">
				<ul id="menu" class="canvas scrollable">
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 2</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 3</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 4</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 5</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 6</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 7</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 8</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 9</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 10</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 11</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 12</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 13</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 14</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 15</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 16</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 17</div>
					</li>
					<li class="menu-element">
						<div class="icon"></div>
						<div class="content">test 18</div>
					</li>
				</ul>
			</div>
		</div>
		<div id="centerLayer" class="canvas in-canvas">
			<div id="header" class="canvas-content">
				<div id="displayLeftPanel">&nbsp;</div>
				<center>
					<div id="title">operation title</div>
				</center>
			</div>
			<div class="scrollable" id="operationContent">
				<h3>PAGINA 1</h3>
				<br/>
				<button id="pushLeftToPage2">push left to page 2</button>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sit amet nisi a justo cursus mollis. Cras fermentum mi in velit sagittis, id facilisis ipsum mollis. Phasellus aliquet, mi vel volutpat volutpat, orci dolor porttitor mauris, quis tempus ipsum risus a enim. Duis ut tempus tortor. Aenean hendrerit at mi eget accumsan. Aenean eget est condimentum, mollis lorem ut, adipiscing risus. Mauris aliquam in sapien quis consectetur. Vivamus non eros sed ante lobortis porta.

Fusce in tellus vitae libero lacinia placerat. Nulla tincidunt, arcu et porta scelerisque, tortor mauris iaculis dolor, eget scelerisque enim urna quis tellus. Nunc arcu dolor, tincidunt ac est ut, semper venenatis magna. Vestibulum id orci congue, dictum elit pellentesque, laoreet orci. Maecenas nisl nisi, aliquet vel volutpat nec, bibendum id ante. Integer tincidunt dictum sapien eu hendrerit. Quisque ultricies imperdiet porta. Vivamus vulputate velit massa. Nam massa nulla, iaculis nec turpis at, faucibus congue augue. Nunc ornare quam id lorem elementum, sit amet porta nibh eleifend. Cras dui orci, auctor ut bibendum hendrerit, fermentum sit amet est. Integer ut dapibus orci, ut imperdiet diam. Donec sit amet odio nisi.

Fusce sagittis cursus nisl id aliquet. Proin cursus justo non cursus pellentesque. Suspendisse varius rutrum molestie. Aliquam euismod molestie dignissim. Donec id dui mauris. Pellentesque orci nisi, molestie ut ultricies ac, ornare a dui. Duis porttitor dui id urna porta aliquam. Curabitur eu placerat elit.
				</p>
			</div>
			<div id="footer">hola footer</div>
		</div>
		<div id="rightLayer" class="canvas off-canvas-right">
			<div class="canvas-content">
				RIGHT
				<a href="javascript:toogleOffCanvasRight();">toogleOffCanvasRight</a>
			</div>
		</div>
	</div>
	<script type="text/javascript" charset="utf-8" src="../js/lib/jquery/jquery-2.0.3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="../js/lib/hammer/hammer.js"></script>
	<script type="text/javascript" charset="utf-8" src="../js/lib/hammer/jquery.hammer.js"></script>
	<script type="text/javascript">
		function showLeftMenu(){
			if($('.in-canvas').hasClass('in-canvas-left-active')){
				$('#operationContent').removeClass('no-touch');
				$('#footer').removeClass('no-touch');
				
				$('#operationContent').addClass('scrollable');
				$('#menu').removeClass("scrollable");

				$('.in-canvas').addClass('pushLeftContentForMenu');
				$('.off-canvas-left').addClass('pushLeftMenu');	
				$('#displayLeftPanel').removeClass('ui-state-active');	
				setTimeout(function(){
					$('.in-canvas').removeClass('in-canvas-left-active');
					$('.off-canvas-left').removeClass('off-canvas-left-active');
					$('.in-canvas').removeClass('pushLeftContentForMenu');
					$('.off-canvas-left').removeClass('pushLeftMenu');
				},300);
			}else{
				$('#menu').scrollTop(0);
				$('#operationContent').addClass('no-touch');
				$('#footer').addClass('no-touch');
				
				$('#operationContent').removeClass('scrollable');
				$('#menu').addClass("scrollable");

				$('.in-canvas').addClass('pushRightContentForMenu');
				$('.off-canvas-left').addClass('pushRightMenu');
				$('#displayLeftPanel').addClass('ui-state-active');
				setTimeout(function(){
					$('.in-canvas').removeClass('pushRightContentForMenu');
					$('.off-canvas-left').removeClass('pushRightMenu');
					$('.in-canvas').addClass('in-canvas-left-active');
					$('.off-canvas-left').addClass('off-canvas-left-active');
				},300);
			}
		}
		$(document).ready(function() {
			//No scrollable webapp
			window.ontouchmove = function(e) {e.preventDefault()};
			//Force scroll on scrollable class
			$('.scrollable').on('touchmove', function(e){
				//alert('scroll');
				e.stopImmediatePropagation();
			});
			$( window ).resize(function() {
				resizeInterface();
			});
			resizeInterface();
			$('#displayLeftPanel').on('click',function(){
				showLeftMenu();
			});
			$('#title').on('click',function(){
				if(!$('#operationContent').hasClass('no-touch')){
					$('#operationContent').animate({
					  scrollTop: 0
					}, 300);
				}
			});
			$('#header').on('click',function(){
				if($('#operationContent').hasClass('no-touch')){
					showLeftMenu();
				}
			});
			$('body').hammer().on('swipe', function(event){ //capture swipe event
				if ( $('#leftLayer').hasClass('off-canvas-left-active') ) { //active menu
					if (event.gesture.direction == 'left') { //swipe left
						//alert('LEFT!');
						showLeftMenu();
					}					
				}else{
					var tanto = ($('#centerLayer').width()*30)/100; //30% container width(left menu size)
					if (event.gesture.startEvent.center.pageX < tanto) { //did gesture start in
						if (event.gesture.direction == 'right') { //swipe right
							//alert('RIGHT!');
							showLeftMenu();
						}
					}else{ //out of menu zone
						//alert('TOO FAR FROM MENU!');
					}
				}
			});
		});

		function resizeInterface(){
			var windowWidth = $( window ).width();
			var windowHeight = $( window ).height();
			var headerHeight = $('#header').height();	
			var footerHeight = $('#footer').is(":visible") ? $('#footer').height() : 0;		

			if(windowWidth > 320){
				$('body').removeClass("mobile");
				$('body').addClass("tablet");
			}else{
				$('body').removeClass("tablet");
				$('body').addClass("mobile");
			}
			$('.canvas').height(windowHeight);
			$('#menu').height(windowHeight-parseInt($('.canvas-content').css('padding-top').replace('px','')));
			$('#operationContent').height(windowHeight-headerHeight-footerHeight);
		};
	</script>
</body>
</html>